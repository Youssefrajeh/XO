<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Youssef Rajeh XO</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #f0f0f0;
        margin: 0;
      }
      h2 {
        margin-bottom: 20px;
        text-align: center;
      }
      .controls {
        margin-bottom: 50px;
        text-align: center;
      }
      .board {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 5px;
        width: var(--board-width, 90vw);
        height: var(--board-height, 90vh);
        max-width: 500px;
        max-height: 500px;
      }
      .cell {
        position: relative;
        background-color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 6vw;
        cursor: pointer;
        border: 1px solid #000;
        transition: background-color 0.3s;
      }
      .cell::before {
        content: "";
        display: block;
        padding-top: 100%;
      }
      .cell > span {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .cell:hover {
        background-color: antiquewhite;
      }
      .cell:active {
        background-color: #e0e0e0;
      }
      .x {
        color: red;
      }
      .o {
        color: blue;
      }
      .myName {
        color: red;
      }
      .myName:hover {
        color: blue;
        font-size: 50px;
      }
    </style>
  </head>
  <body>
    <h1 class="myName">Youssef Rajeh</h1>
    <h2 id="current-player">--- Current Player ---- : X</h2>
    <div class="controls">
      <label for="board-width">Board Width:</label>
      <input
        type="range"
        id="board-width"
        name="board-width"
        min="200"
        max="500"
        value="300"
      />
      <label for="board-height">Board Height:</label>
      <input
        type="range"
        id="board-height"
        name="board-height"
        min="200"
        max="500"
        value="300"
      />
    </div>
    <div class="board" id="board">
      <div class="cell" data-index="0"><span></span></div>
      <div class="cell" data-index="1"><span></span></div>
      <div class="cell" data-index="2"><span></span></div>
      <div class="cell" data-index="3"><span></span></div>
      <div class="cell" data-index="4"><span></span></div>
      <div class="cell" data-index="5"><span></span></div>
      <div class="cell" data-index="6"><span></span></div>
      <div class="cell" data-index="7"><span></span></div>
      <div class="cell" data-index="8"><span></span></div>
    </div>
    <script>
      const board = document.getElementById("board");
      const cells = document.querySelectorAll(".cell");
      const currentPlayerDisplay = document.getElementById("current-player");
      const boardWidthInput = document.getElementById("board-width");
      const boardHeightInput = document.getElementById("board-height");
      let currentPlayer = "X";
      const winningCombinations = [
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8],
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8],
        [0, 4, 8],
        [2, 4, 6],
      ];

      function handleClick(event) {
        const cell = event.target.closest(".cell");
        const index = cell.getAttribute("data-index");

        if (cell.querySelector("span").textContent === "") {
          const span = cell.querySelector("span");
          span.textContent = currentPlayer;
          span.classList.add(currentPlayer.toLowerCase());
          if (checkWin(currentPlayer)) {
            alert(`${currentPlayer} wins!`);
            resetBoard();
          } else if (isDraw()) {
            alert("Draw!");
            resetBoard();
          } else {
            currentPlayer = currentPlayer === "X" ? "O" : "X";
            currentPlayerDisplay.textContent = `---- Current Player ---- : ${currentPlayer}`;
          }
        }
      }

      function checkWin(player) {
        return winningCombinations.some((combination) => {
          return combination.every((index) => {
            return cells[index].querySelector("span").textContent === player;
          });
        });
      }

      function isDraw() {
        return [...cells].every(
          (cell) => cell.querySelector("span").textContent !== ""
        );
      }

      function resetBoard() {
        cells.forEach((cell) => {
          const span = cell.querySelector("span");
          span.textContent = "";
          span.classList.remove("x", "o");
        });
        currentPlayer = "X";
        currentPlayerDisplay.textContent = `Current Player: ${currentPlayer}`;
      }

      function updateBoardSize() {
        const width = boardWidthInput.value + "px";
        const height = boardHeightInput.value + "px";
        document.documentElement.style.setProperty("--board-width", width);
        document.documentElement.style.setProperty("--board-height", height);
      }

      board.addEventListener("click", handleClick);
      board.addEventListener("touchend", handleClick);
      boardWidthInput.addEventListener("input", updateBoardSize);
      boardHeightInput.addEventListener("input", updateBoardSize);

      // Set initial board size
      updateBoardSize();
    </script>
  </body>
</html>
